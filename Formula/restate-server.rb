# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '1.0.2'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "bc59f99f64cbaa92ea98972d58f87e1fffdf93174cbf3bfe0962da1551538b31"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "9c0c4c0949e984abc59bebb638878f4ddcdea47c517cd81c90eb924f389e3ac3"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "ab7b99940e47d62e09d43db66d2222644800c3cadbb2040946098ca27893163c"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "3ebc427daa752390405e03203ae0c08f56a82a6f02e87d718d45eff765e675a0"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
