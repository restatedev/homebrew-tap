# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '1.1.0'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "3b96707e0b67dc7779d05948b42eb0ea04dcf3a982daab77a1edf0bb87ba8cab"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "0f504b08b4f4cdfbe0d2aafd8449a3561404677a3b63899909010af350f03b27"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "5a5a3c4bb5fc57bf207430231a04ee27457bc5ec4e757bc5d951b6a1762c9b4d"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "2ee88d373f01863912e7240179eed960b7b3d086ddb0029395491d41ffbf7691"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
