# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '1.0.0'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "44ec690707aa93cf8672cf054a5d72bb19f24042c00645f85297bc23e2adfdbe"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "7920e053f7c062e6f4654af141722453652793508abf8d185e280e706d7f6b02"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "59f311652308850f4922a7efe18b8ddb36fb1b57487158198285255f83f7afb9"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "1d541044149029c97aaf4f8e8d40d2503174f950c82f0fb658eb81d912baabf1"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
