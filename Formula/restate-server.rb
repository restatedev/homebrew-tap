# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '1.1.3'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "4c4a0185de78b552377ed0b999cd5acc1b7285bca0f25fdf14e1b10cb14db181"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "2fa2e58768a3333825bf94cf394cc01b3c025f0cf061d1437835530ddcc06975"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "e7e4c8d9088f2f32bf58049ee74863f043cb6bcbf2874830062cffa858bfccf3"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "42c8630629270a818efbd1cab214d8acbaf6c24e3be2bb06772cc291187505a4"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
