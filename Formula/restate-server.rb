# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '0.7.0'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "d15c29be8d5fe8843187bb3e96bc3e53d46d6777a8d255ad92cca0c89a863da8"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "9274f01c310f7dc343624384b9b7411d75ec7321a57d95b0822e544085b6a256"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "0f6fe836a0b0df3f1e65dadbd5f2fdc9d2d9e1e22972a0c407140be6c441468f"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "1e70c70d99539961eaa336506c1a491d8951844558bc76cb7af8513f057a66a2"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
