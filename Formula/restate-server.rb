# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '0.9.1'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "1a5f86c4a6d47e8f232c85b4f639feb21a064308060414d4f862070ee3f6a9a5"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "b5d030d4b54d11bd71f53dbd86304e858dedc2cd3bb9e96d4a721b0a53800d4d"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "3f5b9f4752f17605f8ad625ab97471b1606c516c794811647baf0f8838cf0ce2"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "03a6604bc1527958ba1f3bf3806c6fc8191a44780e97894832805f6eada5f8a1"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
