# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '1.1.5'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "6d628d1054d2c5c34ded9479e22c310761c332de57e48dbd8491e0ededb6de2c"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "1f777b1c43cc74b37600c02f73d2922598c9c94438fb84dfb6d0664c4a09b7d2"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "3c10c61ec4d93acefea58c1d096b289d3649f41eef91076e3e5d0a0e8a51726c"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "f52f603eb880c1799993f26292e424aca64ec9023db1668620d1d5ba7962b051"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
