# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '1.1.2'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "08ee7f075b313a4d4f359585007521cbe276fb7fc42b7cd503aba208adde9010"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "36a7b84467401b7cad5ac153990f0db6f5fe2930b030b37a836e537b6e9d5e2a"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "7212b52f5126061770f3ed78ee4d25b8fedda64a198e536518e1b7268ee29362"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "0180d35bcdcba734af7d8c1a06dbd10933afa9ca3220863c5ec81baba1e0b71e"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
