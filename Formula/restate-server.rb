# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '0.9.2'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "9fe2c34704b55c74d2956de008d7b5a8d15d3f7a03af2cbfd3b55f14212935e3"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "fb00a68c6b26bb05c16d0c2018ce9986038f5c9cbcc8ecb4fcf40052fc7522a6"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "c7260fc9fa17e0f43e8ad96c5e7f57929f3e1d512b6020dae1bbb07f03397b61"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "05af51c7ac774c7499e4d2332a8c10672a5beca707b1941840e2ef0b299a998f"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
