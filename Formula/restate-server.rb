# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '1.1.1'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "38e4671b499ead572042383049ddf13bd500e9fda0c6c366483dadb333919253"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "f7125f57b958562930fcac917b79d7ed7a070dbbb8fc0b8a1a1f5d0c134ac724"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "2a6bb226d38c9df99c00716eda5225c300757235be258fc19c926ca9240e4b39"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "ea335fa0dca3516b2f8d895d3148a95b28f7a1686c997fdf32992335d6b1f502"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
