# This file is autogenerated; see release/restate.rb.tmpl

class RestateServer < Formula
  version '0.8.0'
  desc "Restate Server"
  homepage "https://github.com/restatedev/restate"

  arch = Hardware::CPU.arch.to_s
  if OS.mac?
      if Hardware::CPU.arm?
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-apple-darwin.tar.gz"
          sha256 "ed25ec1a9f25f969f125167b00372035490e371fdac6c6fdffe744bfd5fd9f6a"
      else
          url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-apple-darwin.tar.gz"
          sha256 "e43dc209b5608dea0db6b1aaede11ae15f4d2cc2bb3a379b41848044d5cd06af"
      end
  elsif OS.linux?
     if Hardware::CPU.arm?
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.aarch64-unknown-linux-musl.tar.gz"
         sha256 "aef56bc520fb324c4f28bc111be93b13330b38b9edefebf9636ede4b44ce8e28"
     else
         url "https://github.com/restatedev/restate/releases/download/v#{version}/restate.x86_64-unknown-linux-musl.tar.gz"
         sha256 "c0e0394526c09dd41b77f0e51f787955130162e342e058fede3e01c4f50a0ae8"
     end
  end

  def install
    bin.install "restate-server"
  end

  test do
    shell_output("restate-server -V")
  end
end
